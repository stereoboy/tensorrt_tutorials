Namespace(FP16=True, FP32=True, INT8=True, batch_size=4, dump_diff=False, native=True, num_loops=10, topN=5, update_graphdef=False, with_timeline=False, workspace_size=2048)
Starting at 2019-07-29 13:46:52.973163
2019-07-29 13:46:52.983096: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA
2019-07-29 13:46:53.096448: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:998] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2019-07-29 13:46:53.097035: I tensorflow/compiler/xla/service/service.cc:150] XLA service 0x4bdae90 executing computations on platform CUDA. Devices:
2019-07-29 13:46:53.097048: I tensorflow/compiler/xla/service/service.cc:158]   StreamExecutor device (0): GeForce GTX 1080 Ti, Compute Capability 6.1
2019-07-29 13:46:53.120271: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 4200000000 Hz
2019-07-29 13:46:53.120590: I tensorflow/compiler/xla/service/service.cc:150] XLA service 0x2743c90 executing computations on platform Host. Devices:
2019-07-29 13:46:53.120602: I tensorflow/compiler/xla/service/service.cc:158]   StreamExecutor device (0): <undefined>, <undefined>
2019-07-29 13:46:53.120740: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1433] Found device 0 with properties: 
name: GeForce GTX 1080 Ti major: 6 minor: 1 memoryClockRate(GHz): 1.6325
pciBusID: 0000:01:00.0
totalMemory: 10.92GiB freeMemory: 10.17GiB
2019-07-29 13:46:53.120751: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1512] Adding visible gpu devices: 0
2019-07-29 13:46:53.280031: I tensorflow/core/common_runtime/gpu/gpu_device.cc:984] Device interconnect StreamExecutor with strength 1 edge matrix:
2019-07-29 13:46:53.280058: I tensorflow/core/common_runtime/gpu/gpu_device.cc:990]      0 
2019-07-29 13:46:53.280065: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1003] 0:   N 
2019-07-29 13:46:53.280208: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 5588 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1080 Ti, pci bus id: 0000:01:00.0, compute capability: 6.1)
WARNING:tensorflow:From tftrt_sample.py:92: FastGFile.__init__ (from tensorflow.python.platform.gfile) is deprecated and will be removed in a future version.
Instructions for updating:
Use tf.gfile.GFile.
INFO:tensorflow:Starting execution
2019-07-29 13:46:54.149842: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1512] Adding visible gpu devices: 0
2019-07-29 13:46:54.149879: I tensorflow/core/common_runtime/gpu/gpu_device.cc:984] Device interconnect StreamExecutor with strength 1 edge matrix:
2019-07-29 13:46:54.149885: I tensorflow/core/common_runtime/gpu/gpu_device.cc:990]      0 
2019-07-29 13:46:54.149889: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1003] 0:   N 
2019-07-29 13:46:54.149988: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 5588 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1080 Ti, pci bus id: 0000:01:00.0, compute capability: 6.1)
INFO:tensorflow:Starting Warmup cycle
INFO:tensorflow:Warmup done. Starting real timing
iter  0   0.010083556175231934
iter  1   0.009968705177307129
iter  2   0.009967565536499023
iter  3   0.00997797966003418
iter  4   0.009967670440673829
iter  5   0.009981522560119629
iter  6   0.009968624114990235
iter  7   0.009972085952758789
iter  8   0.009993128776550293
iter  9   0.009995098114013673
Comparison= True
INFO:tensorflow:Timing loop done!
images/s : 400.5 +/- 1.3, s/batch: 0.00999 +/- 0.00003
RES, Native, 4, 400.50, 1.33, 0.00999, 0.00003
WARNING:tensorflow:TensorRT mismatch. Compiled against version 5.0.2, but loaded 5.1.5. Things may not work
2019-07-29 13:47:00.911078: I tensorflow/core/grappler/devices.cc:51] Number of eligible GPUs (core count >= 8): 1
2019-07-29 13:47:00.911641: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session
2019-07-29 13:47:00.911865: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1512] Adding visible gpu devices: 0
2019-07-29 13:47:00.911885: I tensorflow/core/common_runtime/gpu/gpu_device.cc:984] Device interconnect StreamExecutor with strength 1 edge matrix:
2019-07-29 13:47:00.911889: I tensorflow/core/common_runtime/gpu/gpu_device.cc:990]      0 
2019-07-29 13:47:00.911893: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1003] 0:   N 
2019-07-29 13:47:00.911985: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 5588 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1080 Ti, pci bus id: 0000:01:00.0, compute capability: 6.1)
2019-07-29 13:47:01.613620: I tensorflow/contrib/tensorrt/segment/segment.cc:443] There are 5 ops of 4 different types in the graph that are not converted to TensorRT: Reshape, Shape, Placeholder, NoOp, (For more information see https://docs.nvidia.com/deeplearning/dgx/integrate-tf-trt/index.html#support-ops).
2019-07-29 13:47:01.628796: I tensorflow/contrib/tensorrt/convert/convert_graph.cc:913] Number of TensorRT candidate segments: 1
2019-07-29 13:47:12.770654: I tensorflow/contrib/tensorrt/convert/convert_graph.cc:1015] TensorRT node TRTEngineOp_0 added for segment 0 consisting of 460 nodes succeeded.
2019-07-29 13:47:12.793217: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:581] Optimization results for grappler item: tf_graph
2019-07-29 13:47:12.793249: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:583]   constant folding: Graph size after: 461 nodes (-267), 477 edges (-267), time = 234.372ms.
2019-07-29 13:47:12.793253: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:583]   layout: Graph size after: 468 nodes (7), 479 edges (2), time = 48.357ms.
2019-07-29 13:47:12.793257: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:583]   constant folding: Graph size after: 463 nodes (-5), 479 edges (0), time = 160.838ms.
2019-07-29 13:47:12.793260: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:583]   TensorRTOptimizer: Graph size after: 4 nodes (-459), 4 edges (-475), time = 11286.6768ms.
INFO:tensorflow:Starting execution
2019-07-29 13:47:14.839631: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1512] Adding visible gpu devices: 0
2019-07-29 13:47:14.839673: I tensorflow/core/common_runtime/gpu/gpu_device.cc:984] Device interconnect StreamExecutor with strength 1 edge matrix:
2019-07-29 13:47:14.839678: I tensorflow/core/common_runtime/gpu/gpu_device.cc:990]      0 
2019-07-29 13:47:14.839681: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1003] 0:   N 
2019-07-29 13:47:14.839794: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 5588 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1080 Ti, pci bus id: 0000:01:00.0, compute capability: 6.1)
INFO:tensorflow:Starting Warmup cycle
INFO:tensorflow:Warmup done. Starting real timing
iter  0   0.006042909622192383
iter  1   0.005518097877502442
iter  2   0.005492162704467773
iter  3   0.00546170711517334
iter  4   0.005492372512817383
iter  5   0.005470027923583984
iter  6   0.0055074596405029295
iter  7   0.005473418235778809
iter  8   0.005469040870666504
iter  9   0.005463871955871582
Comparison= True
INFO:tensorflow:Timing loop done!
images/s : 722.1 +/- 20.4, s/batch: 0.00554 +/- 0.00017
RES, TRT-FP32, 4, 722.14, 20.42, 0.00554, 0.00017
WARNING:tensorflow:TensorRT mismatch. Compiled against version 5.0.2, but loaded 5.1.5. Things may not work
2019-07-29 13:47:18.530297: I tensorflow/core/grappler/devices.cc:51] Number of eligible GPUs (core count >= 8): 1
2019-07-29 13:47:18.531004: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session
2019-07-29 13:47:18.531214: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1512] Adding visible gpu devices: 0
2019-07-29 13:47:18.531236: I tensorflow/core/common_runtime/gpu/gpu_device.cc:984] Device interconnect StreamExecutor with strength 1 edge matrix:
2019-07-29 13:47:18.531241: I tensorflow/core/common_runtime/gpu/gpu_device.cc:990]      0 
2019-07-29 13:47:18.531245: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1003] 0:   N 
2019-07-29 13:47:18.531348: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 5588 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1080 Ti, pci bus id: 0000:01:00.0, compute capability: 6.1)
2019-07-29 13:47:18.941612: I tensorflow/contrib/tensorrt/segment/segment.cc:443] There are 5 ops of 4 different types in the graph that are not converted to TensorRT: Reshape, Shape, Placeholder, NoOp, (For more information see https://docs.nvidia.com/deeplearning/dgx/integrate-tf-trt/index.html#support-ops).
2019-07-29 13:47:18.956855: I tensorflow/contrib/tensorrt/convert/convert_graph.cc:913] Number of TensorRT candidate segments: 1
2019-07-29 13:47:19.187755: W tensorflow/contrib/tensorrt/log/trt_logger.cc:34] DefaultLogger Half2 support requested on hardware without native FP16 support, performance will be negatively affected.
2019-07-29 13:47:34.426172: I tensorflow/contrib/tensorrt/convert/convert_graph.cc:1015] TensorRT node TRTEngineOp_0 added for segment 0 consisting of 460 nodes succeeded.
2019-07-29 13:47:34.451077: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:581] Optimization results for grappler item: tf_graph
2019-07-29 13:47:34.451108: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:583]   constant folding: Graph size after: 461 nodes (-267), 477 edges (-267), time = 136.036ms.
2019-07-29 13:47:34.451116: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:583]   layout: Graph size after: 468 nodes (7), 479 edges (2), time = 48.489ms.
2019-07-29 13:47:34.451121: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:583]   constant folding: Graph size after: 463 nodes (-5), 479 edges (0), time = 110.18ms.
2019-07-29 13:47:34.451126: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:583]   TensorRTOptimizer: Graph size after: 4 nodes (-459), 4 edges (-475), time = 15566.958ms.
INFO:tensorflow:Starting execution
2019-07-29 13:47:36.589027: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1512] Adding visible gpu devices: 0
2019-07-29 13:47:36.589070: I tensorflow/core/common_runtime/gpu/gpu_device.cc:984] Device interconnect StreamExecutor with strength 1 edge matrix:
2019-07-29 13:47:36.589078: I tensorflow/core/common_runtime/gpu/gpu_device.cc:990]      0 
2019-07-29 13:47:36.589085: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1003] 0:   N 
2019-07-29 13:47:36.589186: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 5588 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1080 Ti, pci bus id: 0000:01:00.0, compute capability: 6.1)
INFO:tensorflow:Starting Warmup cycle
INFO:tensorflow:Warmup done. Starting real timing
iter  0   0.005445151329040527
iter  1   0.0054672956466674805
iter  2   0.005501933097839355
iter  3   0.005474681854248047
iter  4   0.005475692749023438
iter  5   0.005484514236450196
iter  6   0.005481328964233399
iter  7   0.0054404067993164065
iter  8   0.005470199584960938
iter  9   0.005512785911560058
Comparison= True
INFO:tensorflow:Timing loop done!
images/s : 730.5 +/- 2.8, s/batch: 0.00548 +/- 0.00002
RES, TRT-FP16, 4, 730.54, 2.82, 0.00548, 0.00002
WARNING:tensorflow:TensorRT mismatch. Compiled against version 5.0.2, but loaded 5.1.5. Things may not work
2019-07-29 13:47:40.381008: I tensorflow/core/grappler/devices.cc:51] Number of eligible GPUs (core count >= 8): 1
2019-07-29 13:47:40.381398: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session
2019-07-29 13:47:40.381627: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1512] Adding visible gpu devices: 0
2019-07-29 13:47:40.381646: I tensorflow/core/common_runtime/gpu/gpu_device.cc:984] Device interconnect StreamExecutor with strength 1 edge matrix:
2019-07-29 13:47:40.381651: I tensorflow/core/common_runtime/gpu/gpu_device.cc:990]      0 
2019-07-29 13:47:40.381654: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1003] 0:   N 
2019-07-29 13:47:40.381748: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 5588 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1080 Ti, pci bus id: 0000:01:00.0, compute capability: 6.1)
2019-07-29 13:47:40.793952: I tensorflow/contrib/tensorrt/segment/segment.cc:443] There are 5 ops of 4 different types in the graph that are not converted to TensorRT: Reshape, Shape, Placeholder, NoOp, (For more information see https://docs.nvidia.com/deeplearning/dgx/integrate-tf-trt/index.html#support-ops).
2019-07-29 13:47:40.809131: I tensorflow/contrib/tensorrt/convert/convert_graph.cc:913] Number of TensorRT candidate segments: 1
2019-07-29 13:47:51.162254: I tensorflow/contrib/tensorrt/convert/convert_graph.cc:1015] TensorRT node TRTEngineOp_0 added for segment 0 consisting of 460 nodes succeeded.
2019-07-29 13:47:51.185064: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:581] Optimization results for grappler item: tf_graph
2019-07-29 13:47:51.185094: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:583]   constant folding: Graph size after: 461 nodes (-267), 477 edges (-267), time = 135.594ms.
2019-07-29 13:47:51.185098: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:583]   layout: Graph size after: 468 nodes (7), 479 edges (2), time = 48.669ms.
2019-07-29 13:47:51.185101: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:583]   constant folding: Graph size after: 463 nodes (-5), 479 edges (0), time = 111.858ms.
2019-07-29 13:47:51.185104: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:583]   TensorRTOptimizer: Graph size after: 4 nodes (-459), 4 edges (-475), time = 10448.9258ms.
Running Calibration
INFO:tensorflow:Starting execution
2019-07-29 13:47:53.042551: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1512] Adding visible gpu devices: 0
2019-07-29 13:47:53.042591: I tensorflow/core/common_runtime/gpu/gpu_device.cc:984] Device interconnect StreamExecutor with strength 1 edge matrix:
2019-07-29 13:47:53.042597: I tensorflow/core/common_runtime/gpu/gpu_device.cc:990]      0 
2019-07-29 13:47:53.042600: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1003] 0:   N 
2019-07-29 13:47:53.042698: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 5588 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1080 Ti, pci bus id: 0000:01:00.0, compute capability: 6.1)
INFO:tensorflow:Starting Warmup cycle
2019-07-29 13:47:53.389915: I tensorflow/contrib/tensorrt/kernels/trt_engine_op.cc:574] Starting calibration thread on device 0, Calibration Resource @ 0x7fe880d94980
INFO:tensorflow:Warmup done. Starting real timing
iter  0   1.2855788135528565
Comparison= True
INFO:tensorflow:Timing loop done!
Creating inference graph
2019-07-29 13:49:25.331325: I tensorflow/contrib/tensorrt/convert/convert_graph.cc:192] Starting Calib Conversion
2019-07-29 13:49:25.374148: W tensorflow/contrib/tensorrt/convert/convert_graph.cc:198] Construction of static int8 engine is not implemented yet!. Dynamic engine will be constructed
INFO:tensorflow:Starting execution
2019-07-29 13:49:54.543718: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1512] Adding visible gpu devices: 0
2019-07-29 13:49:54.543758: I tensorflow/core/common_runtime/gpu/gpu_device.cc:984] Device interconnect StreamExecutor with strength 1 edge matrix:
2019-07-29 13:49:54.543764: I tensorflow/core/common_runtime/gpu/gpu_device.cc:990]      0 
2019-07-29 13:49:54.543767: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1003] 0:   N 
2019-07-29 13:49:54.543866: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 5588 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1080 Ti, pci bus id: 0000:01:00.0, compute capability: 6.1)
INFO:tensorflow:Starting Warmup cycle
2019-07-29 13:49:54.918060: I tensorflow/contrib/tensorrt/kernels/trt_engine_op.cc:496] Building a new TensorRT engine for import/TRTEngineOp_0 with batch size 4
INFO:tensorflow:Warmup done. Starting real timing
iter  0   0.002955002784729004
iter  1   0.002806754112243652
iter  2   0.00270355224609375
iter  3   0.0026506805419921876
iter  4   0.0026297426223754884
iter  5   0.002629570960998535
iter  6   0.0026160383224487303
iter  7   0.0026344966888427732
iter  8   0.0026452827453613283
iter  9   0.002635536193847656
Comparison= True
INFO:tensorflow:Timing loop done!
images/s : 1486.6 +/- 53.6, s/batch: 0.00269 +/- 0.00010
RES, TRT-INT8, 4, 1486.62, 53.64, 0.00269, 0.00010
Done timing 2019-07-29 13:50:17.655359
native ['bow tie, bow-tie, bowtie', 'cornet, horn, trumpet, trump', 'military uniform', 'sweatshirt', 'bulletproof vest']
FP32 ['bow tie, bow-tie, bowtie', 'cornet, horn, trumpet, trump', 'military uniform', 'sweatshirt', 'bulletproof vest']
FP16 ['bow tie, bow-tie, bowtie', 'cornet, horn, trumpet, trump', 'military uniform', 'sweatshirt', 'bulletproof vest']
INT8 ['bow tie, bow-tie, bowtie', 'cornet, horn, trumpet, trump', 'bulletproof vest', 'sweatshirt', "plunger, plumber's helper"]

